# ==============================================================================
# PhilGEPS Production Configuration
# For: philgeps.simple-systems.dev
# ==============================================================================

# ==============================================================================
# Django Configuration
# ==============================================================================

# IMPORTANT: Generate a secure secret key!
# Run: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
SECRET_KEY=REPLACE-WITH-SECURE-GENERATED-KEY

# Production mode
DEBUG=False

# ==============================================================================
# Network & CORS Configuration
# ==============================================================================

# Your production domain
ALLOWED_HOSTS=philgeps.simple-systems.dev,philgeps-api.simple-systems.dev,philgeps-2.simple-systems.dev

# Frontend URLs (HTTPS in production!)
CORS_ALLOWED_ORIGINS=https://philgeps.simple-systems.dev,https://philgeps-2.simple-systems.dev

# CSRF protection
CSRF_TRUSTED_ORIGINS=https://philgeps.simple-systems.dev,https://philgeps-2.simple-systems.dev

# ==============================================================================
# Celery & Queue System
# ==============================================================================

# Update password in URL if you changed RABBITMQ_PASSWORD below
CELERY_BROKER_URL=amqp://admin:CHANGE-THIS-PASSWORD@rabbitmq:5672//
CELERY_RESULT_BACKEND=redis://redis:6379/0
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis

# ==============================================================================
# RabbitMQ Configuration - CHANGE CREDENTIALS!
# ==============================================================================

RABBITMQ_USER=admin
RABBITMQ_PASSWORD=CHANGE-THIS-TO-SECURE-PASSWORD

# ==============================================================================
# Data Configuration
# ==============================================================================

# Use RAM disk for best performance (requires ~3GB RAM)
USE_TMPFS_PARQUET=true

# ==============================================================================
# Gunicorn Configuration
# ==============================================================================

GUNICORN_WORKERS=4
GUNICORN_WORKER_CLASS=gevent
GUNICORN_WORKER_CONNECTIONS=1000
GUNICORN_TIMEOUT=120
GUNICORN_GRACEFUL_TIMEOUT=125
GUNICORN_KEEPALIVE=75
GUNICORN_LOG_LEVEL=info

# ==============================================================================
# Security
# ==============================================================================

SECURE_SSL_REDIRECT=True

# ==============================================================================
# Setup Instructions
# ==============================================================================
#
# 1. Copy this file:
#    cp env.production.example .env
#
# 2. Generate secure SECRET_KEY:
#    python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
#    Replace SECRET_KEY above with the generated value
#
# 3. Set strong RABBITMQ_PASSWORD
#
# 4. Update CELERY_BROKER_URL with your RABBITMQ_PASSWORD
#
# 5. Deploy:
#    docker compose -f docker-compose.ram.yml up -d
#
# 6. Test CORS:
#    From browser console on https://philgeps.simple-systems.dev:
#    fetch('https://your-api-url/api/v1/')
#
# ==============================================================================

